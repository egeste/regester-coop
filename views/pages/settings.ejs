<!DOCTYPE html>
<html lang="en">

  <head>
    <%- include('../partials/head', { pkg }); %>
  </head>

  <body>
    <header class="fixed-top">
      <%- include('../partials/header', { pkg }); %>
    </header>

    <main class="container">
      <form method="post" action="/rpc/update_settings">
        <div class="card mb-3">
          <div class="card-header">Application Settings</div>
          <div class="card-body">
            <div class="form-group row">
              <div class="col">
                <label class="form-label">
                  <span>Timezone</span>
                  <sup class="text-info" title="Set the timezone for the location where this device is installed">
                    <i class="fas fa-question-circle ml-1"></i>
                  </sup>
                </label>
                <select name="timezone" class="form-control">
                  <% moment.tz.names().forEach(timezone => { %>
                  <option value="<%=timezone%>" <% if (timezone === config.timezone) {%>selected<% } %>>
                    <%=timezone%>
                  </option>
                  <% }) %>
                </select>
              </div>

              <div class="col">
                <label class="form-label">
                  <span>Latitude</span>
                  <sup class="text-info" title="Set the latitude for the location where this device is installed">
                    <i class="fas fa-question-circle ml-1"></i>
                  </sup>
                </label>
                <input name="latitude" type="text"class="form-control" value="<%=config.latitude%>" />
              </div>

              <div class="col">
                <label class="form-label">
                  <span>Longitude</span>
                  <sup class="text-info" title="Set the longitude for the location where this device is installed">
                    <i class="fas fa-question-circle ml-1"></i>
                  </sup>
                </label>
                <input name="longitude" type="text" class="form-control" value="<%=config.longitude%>" />
              </div>

              <div class="col">
                <label class="form-label">
                  <span>Enable Automation</span>
                  <sup class="text-info" title="Toggle door open/close automation">
                    <i class="fas fa-question-circle ml-1"></i>
                  </sup>
                </label>
                <input name="automate" value="true" type="checkbox" class="form-control" value="<%=config.automate%>" <% if (config.automate) { %>checked<% } %>/>
              </div>
            </div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header">Hardware Settings</div>
          <div class="card-body">
            <div class="form-group row">
              <div class="col">
                <label class="form-label">
                  <span>Motor Speed</span>
                  <sup class="text-info" title="Set the motor rotations per minute">
                    <i class="fas fa-question-circle ml-1"></i>
                  </sup>
                </label>
                <input name="rpm" type="number" min="1" max="10" class="form-control" value="<%=config.rpm%>" />
              </div>

              <div class="col">
                <label class="form-label">
                  <span>Motor Steps</span>
                  <sup class="text-info" title="Set the motor number of steps per revolution">
                    <i class="fas fa-question-circle ml-1"></i>
                  </sup>
                </label>
                <input name="steps" type="number" min="1" max="4096" class="form-control" value="<%=config.steps%>" />
              </div>

              <div class="col">
                <label class="form-label">
                  <span>Motor Current</span>
                  <sup class="text-info" title="Set the motor current (0 - 1)">
                    <i class="fas fa-question-circle ml-1"></i>
                  </sup>
                </label>
                <input name="current" type="number" min="0" max="1" step="0.1" class="form-control" value="<%=config.current%>" />
              </div>

              <div class="col">
                <label class="form-label">
                  <span>Motor Frequency</span>
                  <sup class="text-info" title="Set the motor PWM frequency">
                    <i class="fas fa-question-circle ml-1"></i>
                  </sup>
                </label>
                <input name="frequency" type="number" min="0" max="99999" class="form-control" value="<%=config.frequency%>" />
              </div>

              <div class="col">
                <label class="form-label">
                  <span>Open Distance</span>
                  <sup class="text-info" title="Set the number of steps to move when opening/closing">
                    <i class="fas fa-question-circle ml-1"></i>
                  </sup>
                </label>
                <input name="distance" type="number" min="200" max="5000" class="form-control" value="<%=config.distance%>" />
              </div>
            </div>
          </div>
        </div>

        <div class="d-flex flex-row-reverse">
          <button class="btn btn-primary" type="submit">
            Submit
          </button>
        </div>
      </form>
    </main>

    <footer class="container fixed-bottom">
      <%- include('../partials/footer', { pkg }); %>
    </footer>
  </body>

  <script type="text/javascript">
    $(function () {
      $('[data-toggle="tooltip"]').tooltip();
    });
  </script>
</html>
