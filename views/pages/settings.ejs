<!DOCTYPE html>
<html lang="en">

  <head>
    <%- include('../partials/head', { pkg }); %>
  </head>

  <body>
    <header class="fixed-top">
      <%- include('../partials/header', { pkg }); %>
    </header>

    <main class="container">
      <form method="post" action="/rpc/update_settings">
        <div class="card mb-3">
          <div class="card-header">Application Settings</div>
          <div class="card-body">
            <div class="form-group row">
              <div class="col">
                <label class="form-label">Server Port</small></label>
                <input name="port" type="number" min="1024" max="65535" class="form-control" value="<%=config.port%>" disabled />
              </div>

              <div class="col">
                <label class="form-label">Timezone</small></label>
                <select name="timezone" class="form-control">
                  <% moment.tz.names().forEach(timezone => { %>
                  <option value="<%=timezone%>" <% if (timezone === config.timezone) {%>selected<% } %>>
                    <%=timezone%>
                  </option>
                  <% }) %>
                </select>
              </div>

              <div class="col">
                <label class="form-label">Latitude</small></label>
                <input name="latitude" type="text"class="form-control" value="<%=config.latitude%>" />
              </div>

              <div class="col">
                <label class="form-label">Longitude</small></label>
                <input name="longitude" type="text" class="form-control" value="<%=config.longitude%>" />
              </div>
            </div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header">Hardware Settings</div>
          <div class="card-body">
            <div class="form-group row">
              <div class="col">
                <label class="form-label">Motor Speed</small></label>
                <input name="rpm" type="number" min="1" max="10" class="form-control" value="<%=config.rpm%>" />
              </div>

              <div class="col">
                <label class="form-label">Motor Steps</small></label>
                <input name="steps" type="number" min="1" max="4096" class="form-control" value="<%=config.steps%>" />
              </div>

              <div class="col">
                <label class="form-label">Motor Current</small></label>
                <input name="current" type="number" min="0" max="1" step="0.1" class="form-control" value="<%=config.current%>" />
              </div>

              <div class="col">
                <label class="form-label">Motor Frequency</small></label>
                <input name="frequency" type="number" min="0" max="99999" class="form-control" value="<%=config.frequency%>" />
              </div>

              <div class="col">
                <label class="form-label">Open Distance</small></label>
                <input name="distance" type="number" min="200" max="5000" class="form-control" value="<%=config.distance%>" />
              </div>
            </div>
          </div>
        </div>

        <div class="d-flex flex-row-reverse">
          <button class="btn btn-primary" type="submit">
            Submit
          </button>
        </div>
      </form>
    </main>

    <footer class="container fixed-bottom">
      <%- include('../partials/footer', { pkg }); %>
    </footer>
  </body>
</html>
